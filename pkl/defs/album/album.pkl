amends  "../../schema/lexicon.pkl"

lexicon = 1
id = "app.rocksky.album"
defs = new Mapping<String, Record> {
  ["main"] {
    type = "record"
    key = "tid"
    description = "A declaration of an album."
    `record` {
      type = "object"
      required = List("title", "artist", "createdAt")
      properties {
        ["title"] = new StringType {
          type = "string"
          description = "The title of the album."
          minLength = 1
          maxLength = 512
        }

        ["artist"] = new StringType {
          type = "string"
          description = "The artist of the album."
          minLength = 1
          maxLength = 256
        }

        ["duration"] = new IntegerType {
          type = "integer"
          description = "The duration of the album in seconds."
        }

        ["releaseDate"] = new StringType {
          type = "string"
          description = "The release date of the album."
          format = "datetime"
        }

        ["year"] = new IntegerType {
          type = "integer"
          description = "The year the album was released."
        }

        ["genre"] = new StringType {
          type = "string"
          description = "The genre of the album."
          maxLength = 256
        }

        ["albumArt"] = new Blob {
          type = "blob"
          description = "The album art of the album."
          accept = List("image/png", "image/jpeg")
          maxSize = 2000000
        }

        ["tags"] = new Array {
          type = "array"
          description = "The tags of the album."
          items = new StringType {
            type = "string"
            minLength = 1
            maxLength = 256
          }
        }

        ["youtubeLink"] = new StringType {
          type = "string"
          description = "The YouTube link of the album."
          format = "uri"
        }

        ["spotifyLink"] = new StringType {
          type = "string"
          description = "The Spotify link of the album."
          format = "uri"
        }

        ["tidalLink"] = new StringType {
          type = "string"
          description = "The tidal link of the album."
          format = "uri"
        }

        ["appleMusicLink"] = new StringType {
          type = "string"
          description = "The Apple Music link of the album."
          format = "uri"
        }

        ["createdAt"] = new StringType {
          type = "string"
          description = "The date and time when the album was created."
          format = "datetime"
        }
      }
    }
  }
}
